#!/bin/bash

PRIMARY=subl

case "$1" in
  *_EDITMSG|*MERGE_MSG|*_TAGMSG|*git-rebase-todo )
    $PRIMARY -w "$1"
    ;;
  * )
    if [[ -z "$1" ]]; then
      $PRIMARY .
    elif [[ -f "$@" ]]; then # FIXME: It would be nice to open multiple files here.
      if [[ -s $@ && $(file --mime-encoding -b $@) = 'binary' ]]; then
        open -a "Hex Fiend" $@
      else
        $PRIMARY $@
      fi
    else
      $PRIMARY $@
    fi
    ;;
esac
